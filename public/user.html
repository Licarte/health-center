<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <title>Health Center</title> -->
    <link rel="shortcut icon" href="/img/health_center_logo.png" type="image/x-icon">
    <script src="/js/jquery.js"></script>
    <link rel="stylesheet" href="/tailwind/tailwind.css">
    <script src="/tailwind/tailwind.js"></script>
    <script src="/js/datatable.js"></script>
    <script src="/js/calendar.js"></script>
    <script src="/apexcharts/dist/apexcharts.min.js"></script>
</head>
<style>
    @font-face {
      font-family: 'Poppins';
      font-weight: 400;
      font-style: normal;
      src: url('/font/Poppins-Regular.ttf') format('woff2');
    }
    *{
      font-family: 'Poppins', sans-serif;
      font-size: 12px;
    }
</style>
<body>

    <nav class="fixed top-0 z-50 w-full bg-white border-b border-gray-200  ">
        <div class="px-3 py-3 lg:px-5 lg:pl-3">
        <div class="flex items-center justify-between">
            <div class="flex items-center justify-start rtl:justify-end">
            <button data-drawer-target="logo-sidebar" data-drawer-toggle="logo-sidebar" aria-controls="logo-sidebar" type="button" class="inline-flex items-center p-2 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200">
                <span class="sr-only">Open sidebar</span>
                <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path clip-rule="evenodd" fill-rule="evenodd" d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"></path>
                </svg>
            </button>
            <span class="flex ms-2 md:me-24">
                <img src="/img/health_center_logo.png" class="h-8 me-3" alt="Health Center Logo" />
                <!-- <span class="self-center text-xl font-semibold sm:text-2xl whitespace-nowrap ">Gun-ob Health Center</span> -->
            </span>
            </div>
            <div class="flex items-center">
                <div class="flex items-center ms-3">
                <div>
                    <button type="button" class="flex text-sm bg-gray-800 rounded-full focus:ring-4 focus:ring-gray-300 " aria-expanded="false" data-dropdown-toggle="dropdown-user">
                        <span class="sr-only">Open user menu</span>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                            <path fill-rule="evenodd" d="M12 20a7.966 7.966 0 0 1-5.002-1.756l.002.001v-.683c0-1.794 1.492-3.25 3.333-3.25h3.334c1.84 0 3.333 1.456 3.333 3.25v.683A7.966 7.966 0 0 1 12 20ZM2 12C2 6.477 6.477 2 12 2s10 4.477 10 10c0 5.5-4.44 9.963-9.932 10h-.138C6.438 21.962 2 17.5 2 12Zm10-5c-1.84 0-3.333 1.455-3.333 3.25S10.159 13.5 12 13.5c1.84 0 3.333-1.455 3.333-3.25S13.841 7 12 7Z" clip-rule="evenodd"/>
                        </svg>
                    </button>
                </div>
                <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-sm shadow-sm  " id="dropdown-user">
                    <div class="px-4 py-3" role="none">
                        <p class="text-sm text-gray-900 " role="none">
                            Christian Amodia
                        </p>
                        <p class="text-sm font-medium text-gray-900 truncate " role="none">
                            amodia@gmail.com
                        </p>
                    </div>
                    <!-- <ul class="py-1" role="none">
                        <li>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100   " role="menuitem">Dashboard</a>
                        </li>
                        <li>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100   " role="menuitem">Settings</a>
                        </li>
                        <li>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100   " role="menuitem">Earnings</a>
                        </li>
                        <li>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100   " role="menuitem">Sign out</a>
                        </li>
                    </ul> -->
                </div>
                </div>
            </div>
        </div>
        </div>
    </nav>
  
    <aside id="logo-sidebar" class="fixed top-0 left-0 z-40 w-64 h-screen pt-20 transition-transform -translate-x-full bg-white border-r border-gray-200 sm:translate-x-0" aria-label="Sidebar">
        <div class="h-full px-3 pb-4 overflow-y-auto bg-white">
            <ul class="space-y-2 font-medium">
                <li class="">
                    <a href="#dashboard" draggable="false"  class="tab-link flex items-center p-2 text-gray-900 rounded-lg  hover:bg-gray-100  group ">
                        <svg class="w-5 h-5 text-gray-500 transition duration-75  group-hover:text-gray-900 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 21">
                            <path d="M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"/>
                            <path d="M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"/>
                        </svg>
                        <span class="ms-3">Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="#appointment" draggable="false" aria-current="true" class="tab-link flex items-center p-2 text-gray-900 rounded-lg  hover:bg-gray-100  group">
                        <svg class="shrink-0 w-5 h-5 text-gray-500 transition duration-75  group-hover:text-gray-900" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 18">
                            <path fill-rule="evenodd" d="M5 5a1 1 0 0 0 1-1 1 1 0 1 1 2 0 1 1 0 0 0 1 1h1a1 1 0 0 0 1-1 1 1 0 1 1 2 0 1 1 0 0 0 1 1h1a1 1 0 0 0 1-1 1 1 0 1 1 2 0 1 1 0 0 0 1 1 2 2 0 0 1 2 2v1a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a2 2 0 0 1 2-2ZM3 19v-7a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Zm6.01-6a1 1 0 1 0-2 0 1 1 0 0 0 2 0Zm2 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm6 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0Zm-10 4a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm6 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0Zm2 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0Z" clip-rule="evenodd"/>
                        </svg>
                          
                        <span class="flex-1 ms-3 whitespace-nowrap">Appointment</span>
                        <span class="inline-flex items-center justify-center w-3 h-3 p-3 ms-3 text-sm font-medium text-green-800 bg-green-200 rounded-full animate-pulse">3</span>
                        <!-- <span class="inline-flex items-center justify-center px-2 ms-3 text-sm font-medium text-gray-800 bg-gray-100 rounded-full  ">Pro</span> -->
                    </a>
                </li>
                <li>
                    <a href="#records" draggable="false" class="tab-link flex items-center p-2 text-gray-900 rounded-lg  hover:bg-gray-100  group">
                        <svg class="shrink-0 w-5 h-5 text-gray-500 transition duration-75  group-hover:text-gray-900 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                            <path d="m17.418 3.623-.018-.008a6.713 6.713 0 0 0-2.4-.569V2h1a1 1 0 1 0 0-2h-2a1 1 0 0 0-1 1v2H9.89A6.977 6.977 0 0 1 12 8v5h-2V8A5 5 0 1 0 0 8v6a1 1 0 0 0 1 1h8v4a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-4h6a1 1 0 0 0 1-1V8a5 5 0 0 0-2.582-4.377ZM6 12H4a1 1 0 0 1 0-2h2a1 1 0 0 1 0 2Z"/>
                        </svg>
                        <span class="flex-1 ms-3 whitespace-nowrap">Health Records</span>
                    </a>
                </li>
                <li class="hidden">
                    <a href="#setting" draggable="false" class="tab-link flex items-center p-2 text-gray-900 rounded-lg  hover:bg-gray-100  group">
                        <svg class="shrink-0 w-5 h-5 text-gray-500 transition duration-75  group-hover:text-gray-900 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 20">
                        <path d="M17 5.923A1 1 0 0 0 16 5h-3V4a4 4 0 1 0-8 0v1H2a1 1 0 0 0-1 .923L.086 17.846A2 2 0 0 0 2.08 20h13.84a2 2 0 0 0 1.994-2.153L17 5.923ZM7 9a1 1 0 0 1-2 0V7h2v2Zm0-5a2 2 0 1 1 4 0v1H7V4Zm6 5a1 1 0 1 1-2 0V7h2v2Z"/>
                        </svg>
                        <span class="flex-1 ms-3 whitespace-nowrap">Settings</span>
                    </a>
                </li>
                <li>
                    <a href="javascript:void(0)" draggable="false" class="flex items-center p-2 text-gray-900 rounded-lg  hover:bg-gray-100  group">
                        <svg class="shrink-0 w-5 h-5 text-gray-500 transition duration-75  group-hover:text-gray-900 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 16">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 8h11m0 0L8 4m4 4-4 4m4-11h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-3"/>
                        </svg>
                        <span class="flex-1 ms-3 whitespace-nowrap">Sign Out</span>
                    </a>
                </li>
            </ul>
        </div>
    </aside>

    <div class="p-4 sm:ml-64">
        <div class="rounded-lg mt-14 tab-content-list">
            <div id="dashboard" class="tab-content hidden">
                <div class="max-w-xs">
                    <button type="button" class="py-2.5 px-3 w-full inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-2xs hover:bg-gray-50 focus:outline-hidden focus:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none">
                      <svg class="shrink-0 size-4" width="33" height="32" viewBox="0 0 33 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_4132_5805adfqfqdq121)">
                          <path d="M32.2566 16.36C32.2566 15.04 32.1567 14.08 31.9171 13.08H16.9166V19.02H25.7251C25.5454 20.5 24.5866 22.72 22.4494 24.22L22.4294 24.42L27.1633 28.1L27.4828 28.14C30.5189 25.34 32.2566 21.22 32.2566 16.36Z" fill="#4285F4"></path>
                          <path d="M16.9166 32C21.231 32 24.8463 30.58 27.5028 28.12L22.4694 24.2C21.1111 25.14 19.3135 25.8 16.9366 25.8C12.7021 25.8 9.12677 23 7.84844 19.16L7.66867 19.18L2.71513 23L2.65521 23.18C5.2718 28.4 10.6648 32 16.9166 32Z" fill="#34A853"></path>
                          <path d="M7.82845 19.16C7.48889 18.16 7.28915 17.1 7.28915 16C7.28915 14.9 7.48889 13.84 7.80848 12.84V12.62L2.81499 8.73999L2.6552 8.81999C1.55663 10.98 0.937439 13.42 0.937439 16C0.937439 18.58 1.55663 21.02 2.63522 23.18L7.82845 19.16Z" fill="#FBBC05"></path>
                          <path d="M16.9166 6.18C19.9127 6.18 21.9501 7.48 23.0886 8.56L27.6027 4.16C24.8263 1.58 21.231 0 16.9166 0C10.6648 0 5.27181 3.6 2.63525 8.82L7.80851 12.84C9.10681 8.98 12.6821 6.18 16.9166 6.18Z" fill="#EB4335"></path>
                        </g>
                        <defs>
                          <clipPath id="clip0_4132_5805adfqfqdq121">
                            <rect width="32" height="32" fill="white" transform="translate(0.937439)"></rect>
                          </clipPath>
                        </defs>
                      </svg>
                      Sign in with Google
                    </button>
                  
                    <div class="py-3 flex items-center text-xs text-gray-400 uppercase before:flex-1 before:border-t before:border-gray-200 before:me-6 after:flex-1 after:border-t after:border-gray-200 after:ms-6">Or</div>
                  
                    <button type="button" class="py-2.5 px-3 w-full inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-2xs hover:bg-gray-50 focus:outline-hidden focus:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none">
                      <svg class="shrink-0 size-4" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M27.2192 10.9088C27.0336 11.0528 23.7568 12.8992 23.7568 17.0048C23.7568 21.7536 27.9264 23.4336 28.0512 23.4752C28.032 23.5776 27.3888 25.776 25.8528 28.016C24.4832 29.9872 23.0528 31.9552 20.8768 31.9552C18.7008 31.9552 18.1408 30.6912 15.6288 30.6912C13.1808 30.6912 12.3104 31.9968 10.32 31.9968C8.3296 31.9968 6.9408 30.1728 5.344 27.9328C3.4944 25.3024 2 21.216 2 17.3376C2 11.1168 6.0448 7.8176 10.0256 7.8176C12.1408 7.8176 13.904 9.2064 15.232 9.2064C16.496 9.2064 18.4672 7.7344 20.8736 7.7344C21.7856 7.7344 25.0624 7.8176 27.2192 10.9088ZM19.7312 5.1008C20.7264 3.92 21.4304 2.2816 21.4304 0.6432C21.4304 0.416 21.4112 0.1856 21.3696 0C19.7504 0.0608 17.824 1.0784 16.6624 2.4256C15.7504 3.4624 14.8992 5.1008 14.8992 6.7616C14.8992 7.0112 14.9408 7.2608 14.96 7.3408C15.0624 7.36 15.2288 7.3824 15.3952 7.3824C16.848 7.3824 18.6752 6.4096 19.7312 5.1008Z" class="fill-black" fill="currentColor"></path>
                      </svg>
                      Sign in with Apple
                    </button>
                  </div>
            </div>
            <div id="records" class="tab-content hidden">
                <table id="records-table" class="records-table"></table>
            </div>
            <div id="setting" class="tab-content hidden">Setting</div>
            <div id="appointment" class="tab-content">
                <div id="calendar" class="p-0 m-0"></div>  
            </div>
            <div class="display-all-modal">
                <div id="records-modal" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
                    <div class="relative p-4 w-full max-w-2xl max-h-full">
                        <div class="relative bg-white rounded-lg shadow-sm">
                            <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-900">
                                    Health Center Form
                                </h3>
                            </div>
                            <form id="records-form" class="p-4 md:p-5">
                                <div class="grid gap-4 mb-4 grid-cols-2">
                                    <div class="col-span-1">
                                        <label for="records-name" class="block mb-2 text-sm font-medium text-gray-900">Name</label>
                                        <input 
                                            type="text" 
                                            name="name" 
                                            id="records-name" 
                                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                            placeholder="Type name" required>
                                    </div>
                                    <div class="col-span-1">
                                        <label for="records-address" class="block mb-2 text-sm font-medium text-gray-900">Address</label>
                                        <input 
                                            type="text" 
                                            name="address" 
                                            id="records-address" 
                                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                            placeholder="Type Address" required>
                                    </div>
                                    <div class="col-span-1">
                                        <label for="records-dateOfBirth" class="block mb-2 text-sm font-medium text-gray-900">Date of Birth</label>
                                        <input 
                                            type="date" 
                                            name="dateOfBirth" 
                                            id="records-dateOfBirth" 
                                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                            placeholder="Date of Birth" required>
                                    </div>
                                    <div class="col-span-1">
                                        <label for="recordstype" class="block mb-2 text-sm font-medium text-gray-900">Select Services</label>
                                        <select required id="recordstype" name="type" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5">
                                            <option selected>Select Services</option>
                                            <option value="1">Consultation</option>
                                            <option value="2">Immunize</option>
                                            <option value="3">Prenatal</option>
                                        </select>
                                    </div>
                                    <div class="col-span-2">
                                        <hr class="h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 border-0 rounded my-4">
                                    </div>
                                    <div id="consultation-form" class="records-form-type gap-4 mb-4 grid-cols-2 col-span-2 hidden">
                                        <!-- Consultation form fields -->
                                        <div class="col-span-1">
                                            <label for="chiefComplaint" class="block mb-2 text-sm font-medium text-gray-900">Chief Complaint</label>
                                            <textarea 
                                                id="chiefComplaint"
                                                name="chiefComplaint" 
                                                rows="4" 
                                                class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500" 
                                                placeholder="Write complaint"></textarea>                    
                                        </div>
                                        <div class="col-span-1">
                                            <label for="diagnosis" class="block mb-2 text-sm font-medium text-gray-900">Diagnosis</label>
                                            <textarea 
                                                id="diagnosis"
                                                name="diagnosis" 
                                                rows="4" 
                                                class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500" 
                                                placeholder="Write diagnosis"></textarea>                    
                                        </div>
                                        <div class="col-span-1">
                                            <label for="treatmentPlan" class="block mb-2 text-sm font-medium text-gray-900">Treatment Plan</label>
                                            <textarea 
                                                id="treatmentPlan"
                                                name="treatmentPlan" 
                                                rows="4" 
                                                class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500" 
                                                placeholder="Write treatment plan"></textarea>                    
                                        </div>
                                        <div class="col-span-1">
                                            <label for="medicationsPrescribed" class="block mb-2 text-sm font-medium text-gray-900">Medications Prescribed</label>
                                            <textarea 
                                                id="medicationsPrescribed"
                                                name="medicationsPrescribed" 
                                                rows="4" 
                                                class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500" 
                                                placeholder="Write medications prescribed"></textarea>                    
                                        </div>
                                        <div class="col-span-2">
                                            <hr class="h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 border-0 rounded my-4">
                                        </div>
                                        <div class="col-span-2 sm:col-span-1">
                                            <label for="bloodPressure" class="block mb-2 text-sm font-medium text-gray-900">Blood Pressure</label>
                                            <input 
                                                type="text" 
                                                name="bloodPressure" 
                                                id="bloodPressure" 
                                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                                placeholder="ex. 120/80" required>
                                        </div>
                                        <div class="col-span-2 sm:col-span-1">
                                            <label for="pulseRate" class="block mb-2 text-sm font-medium text-gray-900">Pulse Rate</label>
                                            <input 
                                                type="number" 
                                                name="pulseRate" 
                                                id="pulseRate" 
                                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                                placeholder="ex. 72 bpm" required>
                                        </div>
                                        <div class="col-span-2 sm:col-span-1">
                                            <label for="temperature" class="block mb-2 text-sm font-medium text-gray-900">Temperature</label>
                                            <input 
                                                type="number" 
                                                name="temperature" 
                                                id="temperature" 
                                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                                placeholder="ex. 37.2°C" required>
                                        </div>
                                        <div class="col-span-2 sm:col-span-1">
                                            <label for="followupDate" class="block mb-2 text-sm font-medium text-gray-900">Follow-up Date</label>
                                            <input 
                                                type="date" 
                                                name="followupDate" 
                                                id="followupDate" 
                                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                                placeholder="ex. 37.2°C" required>
                                        </div>
                                    </div>
                                    <div id="prenatal-form" class="records-form-type gap-4 mb-4 grid-cols-2 col-span-2 hidden">
                                        <div class="col-span-1">
                                            <label for="lastMenstrualPeriod" class="block mb-2 text-sm font-medium text-gray-900">Last Menstrual Period</label>
                                            <input 
                                                type="date" 
                                                name="lastMenstrualPeriod" 
                                                id="lastMenstrualPeriod" 
                                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                                placeholder="Last Menstrual Period" required>
                                        </div>
                                        <div class="col-span-1">
                                            <label for="expectedDateOfDelivery" class="block mb-2 text-sm font-medium text-gray-900">Expected Delivery</label>
                                            <input 
                                                type="date" 
                                                name="expectedDateOfDelivery" 
                                                id="expectedDateOfDelivery" 
                                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                                placeholder="Expected Date of Delivery" required>
                                        </div>
                                        <div class="col-span-1">
                                            <label for="followupDate" class="block mb-2 text-sm font-medium text-gray-900">Follow-up Date</label>
                                            <input 
                                                type="date" 
                                                name="followupDate" 
                                                id="followupDate" 
                                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                                placeholder="Follow-up Date" required>
                                        </div>
                                    </div>
                                    <div id="immunize-form" class="records-form-type gap-4 mb-4 grid-cols-2 col-span-2 hidden">
                                        <div class="col-span-1">
                                            <label for="immunize-parentGuardianName" class="block mb-2 text-sm font-medium text-gray-900">Parent/Guardian Name</label>
                                            <input 
                                                type="text" 
                                                name="parentGuardianName" 
                                                id="immunize-parentGuardianName" 
                                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                                placeholder="Type parent name" required>
                                        </div>
                                        <div class="col-span-1">
                                            <label for="vaccination" class="block mb-2 text-sm font-medium text-gray-900">Select Vaccination</label>
                                            <select id="vaccination" name="vaccination" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5">
                                                <option selected value="1">BCG</option>
                                                <option value="2">DPT</option>
                                                <option value="3">Hepatitis B</option>
                                                <option value="4">Hepatitis A</option>
                                            </select>
                                        </div>
                                        <div class="col-span-1">
                                            <label for="nextScheduledVaccination" class="block mb-2 text-sm font-medium text-gray-900">Next Vaccination</label>
                                            <input 
                                                type="date" 
                                                name="nextScheduledVaccination" 
                                                id="nextScheduledVaccination" 
                                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                                placeholder="Next Scheduled Vaccination" required>
                                        </div>
                                    </div>
                                </div>
                                <button type="submit" class="text-white inline-flex items-center bg-green-500 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center" aria-label="Submit form">
                                    <svg class="me-1 -ms-1 w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
                                    Submit
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="displayUpdateModal"></div>
    <div class="displayViewModal">
        <div id="records-view-modal" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
            <div class="relative p-4 w-full max-w-3xl max-h-full">
                <div class="relative bg-white rounded-lg shadow-sm">
                    <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">
                            History
                        </h3>
                        <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="records-view-modal">
                            <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                            </svg>
                            <span class="sr-only">Close modal</span>
                        </button>
                    </div>
                    <div>
                        <div class="grid gap-4 mb-4 grid-cols-2">
                            <div class="col-span-1">
                                <label for="records-name" class="block mb-2 text-sm font-medium text-gray-900">Name</label>
                                <input 
                                    type="text" 
                                    name="name" 
                                    id="records-name" 
                                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                    placeholder="Type name" required>
                            </div>
                            <div class="col-span-1">
                                <label for="records-address" class="block mb-2 text-sm font-medium text-gray-900">Address</label>
                                <input 
                                    type="text" 
                                    name="address" 
                                    id="records-address" 
                                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                    placeholder="Type Address" required>
                            </div>
                            <div class="col-span-1">
                                <label for="records-dateOfBirth" class="block mb-2 text-sm font-medium text-gray-900">Date of Birth</label>
                                <input 
                                    type="date" 
                                    name="dateOfBirth" 
                                    id="records-dateOfBirth" 
                                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                    placeholder="Date of Birth" required>
                            </div>
                        </div>
                        <div class="grid gap-4 mb-4 grid-cols-2"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="displayAppointModal"></div>
</body>
<!--Sidebar click-->
<script>
    $(document).ready(function() {
        $('.tab-link').click(function(e) {
            e.preventDefault();
            var target = $(this).attr('href');
            $('.tab-content').addClass('hidden');
            $(target).removeClass('hidden');
        });
        
        $('#close-drawer').click(function() {
            $('#drawer-navigation').addClass('-translate-x-full');
        });
    });
</script>

<!--Sanitize Method Toast-->
<script>
    let recordsDataTable;

    function sanitize(input) {
        // return input.replace(/</g, '&lt;').replace(/>/g, '&gt;');
        return typeof input==='int'? input:input.replace(/<script>/g, '').replace(/<\/script>/g, '')
    }
    async function setMethod(url,method,data){
        return(
            await new Promise((resolve,reject)=>{
                $.ajax({
                    url:url,
                    method:method,
                    data:data,
                    success:response=>{
                        resolve(response)
                    },
                    error:err=>{
                        reject(err)
                    }
                })
            })
        )
    }

    const setToast = (message,status)=>{
        $('.tab-content-list .customToast').remove()
        const config = {
            'bg':{
                1:`<svg class="w-5 h-5 text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 11.917 9.724 16.5 19 7.5"/>
                </svg>`,
                2:`<svg class="w-5 h-5 text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 17.94 6M18 18 6.06 6"/>
                  </svg>`
            },
            'err':{
                1:'red',
                2:'green'
            }
        }
        const buff = 
            `<div id="toast-bottom-right" class="customToast fixed flex items-center w-full max-w-xs p-4 space-x-4 text-white bg-${status?config.err[1]:config.err[2]}-400 divide-x rtl:divide-x-reverse divide-gray-200 rounded-lg shadow-sm right-5 bottom-5" role="alert">
                ${status?config.bg[2]:config.bg[1]}
                <div class="ps-4 text-sm font-normal">${message}.</div>
            </div>`
        $('.tab-content-list').append(buff)

        setTimeout(()=>{$('.tab-content-list .customToast').remove()},5000)
    }

</script>

<!--Form Function-->
<script>
    $('#recordstype').on('change', function(e) {
        e.preventDefault()
        const selectedValue = $(this).val()
        const formData = ['consultation', 'immunize', 'prenatal']

        $('.records-form-type').removeClass('grid grid-cols-2 gap-4').addClass('hidden').find('input, select, textarea').removeAttr('required')

        if (formData[selectedValue-1]) {
            const selectedForm = $(`#${formData[selectedValue-1]}-form.records-form-type`)
            selectedForm.addClass('grid grid-cols-2 gap-4').removeClass('hidden')
            selectedForm.find('input, select, textarea').attr('required', true)
        }
    });


    $('#records-form').submit(async function(e) {
        e.preventDefault();
        const $parent = $(e.currentTarget);
        const selectedService = $('#records-form #recordstype').val();
        const endpoints = ['/consultation', '/immunize', '/prenatal'];
        const endpoint = endpoints[selectedService-1];

        const formData = $parent.find(':input:visible').serialize();
        if(endpoint){
            const response = await setMethod(endpoint, 'POST', formData);

            setToast(response.message, response.error);
            if (!response.error) {
                $parent[0].reset();
                recordsFunc()
                $('#records-form #recordstype').trigger('change');
            }else{
                setToast(response.message,response.error)
            }
            console.log(response);
        }
    });
</script>

<!--Init Modal-->
<script>
    const initModal = (elementId)=>{
      const $targetEl = document.getElementById(elementId);
      const options = {
          placement: 'bottom-right',
          backdrop: 'dynamic',
          backdropClasses:
              'bg-gray-900/50 fixed inset-0 z-40',
          closable: true,
          onHide: () => {
            console.log('modal is hide');
          },
          onShow: () => {
              console.log('modal is shown');
          },
          onToggle: () => {
              console.log('modal has been toggled');
          },
      };
      const instanceOptions = {
        id: elementId,
        override: true
      };
      const modal = new Modal($targetEl, options, instanceOptions);
      return modal
    }
    const initDrawer = (elementId)=>{
      const $targetEl = document.getElementById(elementId);
      const options = {
          placement: 'right',
          backdrop: true,
          bodyScrolling: false,
          edge: false,
          edgeOffset: '',
          closable: true,
          onHide: () => {
              console.log('Drawer is hidden');
          },
          onShow: () => {
              console.log('Drawer is shown');
          },
          onToggle: () => {
              console.log('Drawer has been toggled');
          },
      };
      const instanceOptions = {
        id: elementId,
        override: true
      };
      const drawer = new Drawer($targetEl, options, instanceOptions);
      return drawer
    }
    const initDropdown = (targetId,triggerButton)=>{
        const $targetEl = document.getElementById(targetId);
        const $triggerEl = document.getElementById(triggerButton);
        const options = {
            placement: 'bottom',
            triggerType: 'click',
            offsetSkidding: 0,
            offsetDistance: 10,
            delay: 300,
            ignoreClickOutsideClass: false,
            onHide: () => {
                console.log('dropdown has been hidden');
            },
            onShow: () => {
                console.log('dropdown has been shown');
            },
            onToggle: () => {
                console.log('dropdown has been toggled');
            },
        };

        // instance options object
        const instanceOptions = {
            id: targetId,
            override: true
        };
        const dropdown = new Dropdown($targetEl, $triggerEl, options, instanceOptions);
        return dropdown
    }
</script>

<!--Handle Table Dropdown-->
<script>
    const handleDropdownButton = async (button, dropdownTitle,updateBtn,deleteBtn,viewBtn) => {
        const thisId = $(button).attr('id');
        const itemId = $(button).attr('itemId');
        const dropdown = $(`#dropdown-${thisId}`)
        if(dropdown.length) dropdown.remove()
        const dropdownHtml = `
            <div id="dropdown-${thisId}" class="z-10 hidden bg-gray-100 divide-y divide-gray-100 rounded-lg shadow-sm w-44 user-select-none">
                <ul class="py-2 text-sm text-gray-700 text-center" aria-labelledby="${thisId}">
                    <li>
                        <a href="#" id="${itemId}" class="block px-4 py-2 hover:bg-green-800 hover:text-white view-btn">View</a>
                    </li>
                </ul>
            </div>`;
        $(button).after(dropdownHtml);
        const showDropDown = initDropdown(`dropdown-${thisId}`, thisId);
        showDropDown.show();

        $(`#dropdown-${thisId} .view-btn`).on('click', () => viewBtn(button));
        // $(`#dropdown-${thisId} .update-btn`).on('click', () => updateBtn(button));
        // $(`#dropdown-${thisId} .delete-btn`).on('click', () => deleteBtn(button));
    };
    const consultationhandledropdownBtn = async (button)=>{
        const thisId = $(button).attr('id')
        const itemId = $(button).attr('itemId')
        await handleDropdownButton(
            button,
            "Consult",
            (btn)=>updateconsultationshowModal(thisId,itemId), 
            (btn)=>deleteShowModal(itemId,'/consultation',consultationFunc),
            (btn)=>viewShowModal(thisId,itemId)
        );
    }
    const prenatalhandledropdownBtn = async (button)=>{
        const thisId = $(button).attr('id')
        const itemId = $(button).attr('itemId')
        await handleDropdownButton(
            button, 
            "Prenatal", 
            (btn)=>updateprenatalshowModal(thisId,itemId), 
            (btn)=>deleteShowModal(itemId,'/prenatal',prenatalFunc)
        );
    }
    const immunizehandledropdownBtn = async (button)=>{
        const thisId = $(button).attr('id')
        const itemId = $(button).attr('itemId')
        await handleDropdownButton(
            button, 
            "Immunize", 
            (btn)=>updateimmunizeshowModal(thisId,itemId), 
            (btn)=>deleteShowModal(itemId,'/immunize',immunizeFunc)
        );
    }
    const recordshandledropdownBtn = async (button)=>{
        const thisId = $(button).attr('id')
        const itemId = $(button).attr('itemId')
        await handleDropdownButton(
            button, 
            "Records", 
            (btn)=>updaterecordshowModal(thisId,itemId), 
            (btn)=>deleteShowModal(itemId,'/records',recordsFunc),
            (btn)=>viewShowModal(thisId,itemId)
        );
    }
    const resourceshandledropdownBtn = async (button)=>{
        const thisId = $(button).attr('id')
        const itemId = $(button).attr('itemId')
        await handleDropdownButton(
            button, 
            "", 
            (btn)=>updateresourceshowModal(thisId,itemId), 
            (btn)=>deleteShowModal(itemId,'/resources',resourcesFunc)
        );
    }
</script>

<!--Handle Modal When Dropdown Click-->
<script>
    const updateconsultationshowModal = async ($parent,thisId)=>{
        const result = await setMethod(`/consultation/${thisId}`,'GET')
        if(result.error){
            setToast(result.message,result.error)
            return
        }
        const itemData = result.data
        const {
            id,
            blood_pressure,
            complaint,
            date_consultation,
            date_created,
            date_updated,
            diagnosis,
            folloup_date,
            medication_prescribed,
            name,
            pulse_rate,
            status,
            temperature,
            treatment_plan,
            user_id
        } = itemData
        let buff = `
        <div id="update-consultation-modal-${thisId}" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
            <div class="relative p-4 max-w-2xl w-full max-h-full">
                <div class="relative bg-white rounded-lg shadow-sm">
                    <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">
                            Update Consultation Form
                        </h3>
                        <!-- <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center" data-modal-toggle="consultation-modal">
                            <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                            </svg>
                            <span class="sr-only">Close modal</span>
                        </button> -->
                    </div>
                    <form id="update-consultation-form" class="p-4 md:p-5">
                        <input type="hidden" name="id" value="${id}"/>
                        <div class="grid gap-4 mb-4 grid-cols-2">
                            <div class="col-span-2">
                                <label for="patientName" class="block mb-2 text-sm font-medium text-gray-900">Name</label>
                                <input 
                                type="text" 
                                name="patientName" 
                                id="patientName" 
                                value="${name}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Type patient name" required="">
                            </div>
                            <div class="col-span-1">
                                <label for="chiefComplaint" class="block mb-2 text-sm font-medium text-gray-900">Complaint</label>
                                <textarea 
                                id="chiefComplaint"
                                name="chiefComplaint" 
                                rows="4" 
                                class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500" 
                                placeholder="Write complaint">${complaint}</textarea>                    
                            </div>
                            <div class="col-span-1">
                                <label for="diagnosis" class="block mb-2 text-sm font-medium text-gray-900">Diagnosis</label>
                                <textarea 
                                id="diagnosis"
                                name="diagnosis" 
                                rows="4"
                                class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500" 
                                placeholder="Write diagnosis">${diagnosis}</textarea>                    
                            </div>
                            <div class="col-span-1">
                                <label for="treatmentPlan" class="block mb-2 text-sm font-medium text-gray-900">Treatment Plan</label>
                                <textarea 
                                id="treatmentPlan"
                                name="treatmentPlan" 
                                rows="4" 
                                class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500" 
                                placeholder="Write treatment plan">${treatment_plan}</textarea>                    
                            </div>
                            <div class="col-span-1">
                                <label for="medicationsPrescribed" class="block mb-2 text-sm font-medium text-gray-900">Medications Prescribed</label>
                                <textarea 
                                id="medicationsPrescribed"
                                name="medicationsPrescribed" 
                                rows="4" 
                                class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500" 
                                placeholder="Write medications prescribed">${medication_prescribed}</textarea>                    
                            </div>
                            <div class="col-span-2">
                                <hr class="h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 border-0 rounded my-4">
                            </div>
                            <div class="col-span-2 sm:col-span-1">
                                <label for="bloodPressure" class="block mb-2 text-sm font-medium text-gray-900">Blood Pressure</label>
                                <input 
                                type="text" 
                                name="bloodPressure" 
                                id="bloodPressure" 
                                value="${blood_pressure}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="ex. 120/80" required="">
                            </div>
                            <div class="col-span-2 sm:col-span-1">
                                <label for="pulseRate" class="block mb-2 text-sm font-medium text-gray-900">Pulse Rate</label>
                                <input 
                                type="number" 
                                name="pulseRate" 
                                id="pulseRate" 
                                value="${pulse_rate}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="ex. 72 bpm" required="">
                            </div>
                            <div class="col-span-2 sm:col-span-2">
                                <label for="temperature" class="block mb-2 text-sm font-medium text-gray-900">Temperature</label>
                                <input 
                                type="number" 
                                name="temperature" 
                                id="temperature" 
                                value="${temperature}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="ex. 37.2°C" required="">
                            </div>
                        </div>
                        <button type="submit" class="text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">
                            <svg class="me-1 -ms-1 w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
                            Submit
                        </button>
                    </form>
                </div>
            </div>
        </div>`
        $('.displayUpdateModal').empty()
        $('.displayUpdateModal').append(buff)

        var modalShow = initModal(`update-consultation-modal-${thisId}`)
        modalShow.show()

        $('#update-consultation-form').submit( async(e)=>{
            e.preventDefault()
            const $parent = $(e.currentTarget)
            const response = await setMethod('/consultation','PUT',$parent.serialize())
            setToast(response.message,response.error)
            modalShow.hide()
            recordsFunc()
            var updatemodalShow = initModal(`update-consultation-modal-${thisId}`)
            updatemodalShow.show()
        })
    }

    const updateprenatalshowModal = async ($parent,thisId)=>{
        const result = await setMethod(`/prenatal/${thisId}`,'GET')
        if(result.error){
            setToast(result.message,result.error)
            return
        }
        
        const itemData = result.data
        const {
            address,
            date_birth,
            date_created,
            date_updated,
            expected_date_delivery,
            id,
            last_menstrual_period,
            name,
            status,
            user_id
        } = itemData
        let buff = `
        <div id="update-prenatal-modal-${thisId}" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
            <div class="relative p-4 w-full max-w-2xl max-h-full">
                <div class="relative bg-white rounded-lg shadow-sm">
                    <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">
                            Prenatal Form
                        </h3>
                        <!-- <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center" data-modal-toggle="prenatal-modal">
                            <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                            </svg>
                            <span class="sr-only">Close modal</span>
                        </button> -->
                    </div>
                    <form id="update-prenatal-form" class="p-4 md:p-5">
                        <div class="grid gap-4 mb-4 grid-cols-2">
                            <input type="hidden" name="id" value="${id}" />
                            <div class="col-span-1">
                                <label for="motherName" class="block mb-2 text-sm font-medium text-gray-900">Mother's Name</label>
                                <input 
                                type="text" 
                                name="motherName" 
                                id="motherName" 
                                value="${name}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Type mother's name" required="">
                            </div>
                            <div class="col-span-1">
                                <label for="dateOfBirth" class="block mb-2 text-sm font-medium text-gray-900">Date of Birth</label>
                                <input 
                                type="date" 
                                name="dateOfBirth" 
                                id="dateOfBirth" 
                                value="${date_birth}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Date of Birth" required="">
                            </div>
                            <div class="col-span-2">
                                <label for="address" class="block mb-2 text-sm font-medium text-gray-900">Address</label>
                                <input 
                                type="text" 
                                name="address" 
                                id="address" 
                                value="${address}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Type Address" required="">
                            </div>
                            <div class="col-span-1">
                                <label for="lastMenstrualPeriod" class="block mb-2 text-sm font-medium text-gray-900">Last Menstrual Period</label>
                                <input 
                                type="date" 
                                name="lastMenstrualPeriod" 
                                id="lastMenstrualPeriod" 
                                value="${last_menstrual_period}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Last Menstrual Period" required="">
                            </div>
                            <div class="col-span-1">
                                <label for="expectedDateOfDelivery" class="block mb-2 text-sm font-medium text-gray-900">Expected Delivery</label>
                                <input 
                                type="date" 
                                name="expectedDateOfDelivery" 
                                id="expectedDateOfDelivery" 
                                value="${expected_date_delivery}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Expected Date of Delivery" required="">
                            </div>
                        </div>
                        <button type="submit" class="text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">
                            <svg class="me-1 -ms-1 w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
                            Submit
                        </button>
                    </form>
                </div>
            </div>
        </div>`
        $('.displayUpdateModal').empty()
        $('.displayUpdateModal').append(buff)

        var modalShow = initModal(`update-prenatal-modal-${thisId}`)
        modalShow.show()

        $('#update-prenatal-form').submit( async(e)=>{
            e.preventDefault()
            const $parent = $(e.currentTarget)
            const response = await setMethod('/prenatal','PUT',$parent.serialize())
            setToast(response.message,response.error)
            modalShow.hide()
            prenatalFunc()
            var updatemodalShow = initModal(`update-prenatal-modal-${thisId}`)
            updatemodalShow.show()
        })
    }

    const updateimmunizeshowModal = async ($parent,thisId)=>{
        const result = await setMethod(`/immunize/${thisId}`,'GET')
        if(result.error){
            setToast(result.message,result.error)
            return
        }
        
        const itemData = result.data
        const {
            address,
            date_birth,
            date_created,
            date_updated,
            id,
            name,
            next_schedule,
            parent,
            status,
            user_id,
            vaccine
        } = itemData
        const parseData = JSON.parse(vaccine)
        console.log(parseData)
        let buff = `
        <div id="update-immunize-modal-${thisId}" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
            <div class="relative p-4 w-full max-w-2xl max-h-full">
                <div class="relative bg-white rounded-lg shadow-sm">
                    <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">
                           Update Immunization Form
                        </h3>
                    </div>
                    <form id="update-immunize-form" class="p-4 md:p-5">
                        <div class="grid gap-4 mb-4 grid-cols-2">
                            <input type="hidden" name="id" value="${id}" />
                            <div class="col-span-1">
                                <label for="childName" class="block mb-2 text-sm font-medium text-gray-900">Child's Name</label>
                                <input 
                                type="text" 
                                name="childName" 
                                id="childName"
                                value="${name}" 
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Type child's name" required="">
                            </div>
                            <div class="col-span-1">
                                <label for="parentGuardianName" class="block mb-2 text-sm font-medium text-gray-900">Parent/Guardian Name</label>
                                <input 
                                type="text" 
                                name="parentGuardianName" 
                                id="parentGuardianName" 
                                value="${parent}" 
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Type Parent/Guardian Name" required="">
                            </div>
                            <div class="col-span-1">
                                <label for="dateOfBirth" class="block mb-2 text-sm font-medium text-gray-900">Date of Birth</label>
                                <input 
                                type="date" 
                                name="dateOfBirth" 
                                id="dateOfBirth" 
                                value="${date_birth}" 
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Date of Birth" required="">
                            </div>
                            <div class="col-span-1">
                                <label for="nextScheduledVaccination" class="block mb-2 text-sm font-medium text-gray-900">Next Vaccination</label>
                                <input 
                                type="date" 
                                name="nextScheduledVaccination" 
                                id="nextScheduledVaccination" 
                                value="${next_schedule}" 
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Next Scheduled Vaccination" required="">
                            </div>
                            <div class="col-span-1">
                                <label for="address" class="block mb-2 text-sm font-medium text-gray-900">Address</label>
                                <input 
                                type="text" 
                                name="address" 
                                id="address" 
                                value="${address}" 
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Type Address" required="">
                            </div>
                            <div class="col-span-1">
                                <label for="vaccination" class="block mb-2 text-sm font-medium text-gray-900">Select Vaccination</label>
                                <select id="vaccination" name="vaccination" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5">
                                    <option selected value="1" ${vaccine.includes('1')?'selected':''}>BCG</option>
                                    <option value="2" ${vaccine.includes('2')?'selected':''}>DPT</option>
                                    <option value="3" ${vaccine.includes('3')?'selected':''}>Hepatitis B</option>
                                    <option value="4" ${vaccine.includes('4')?'selected':''}>Hepatitis A</option>
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">
                            <svg class="me-1 -ms-1 w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
                            Submit
                        </button>
                    </form>
                </div>
            </div>
        </div>`

        $('.displayUpdateModal').empty()
        $('.displayUpdateModal').append(buff)

        var modalShow = initModal(`update-immunize-modal-${thisId}`)
        modalShow.show()

        $('#update-immunize-form').submit( async(e)=>{
            e.preventDefault()
            const $parent = $(e.currentTarget)
            const response = await setMethod('/immunize','PUT',$parent.serialize())
            setToast(response.message,response.error)
            modalShow.hide()
            immunizeFunc()
            var updatemodalShow = initModal(`update-immunize-modal-${thisId}`)
            updatemodalShow.show()
        })
    }

    const updaterecordshowModal = async ($parent,thisId)=>{
        
    }
    
    const updateresourceshowModal = async ($parent,thisId)=>{
        const result = await setMethod(`/resources/${thisId}`,'GET')
        if(result.error){
            setToast(result.message,result.error)
            return
        }
        
        const itemData = result.data
        console.log(itemData)
        const {
            date_created,
            date_expired,
            date_updated,
            description,
            id,
            manufacturer,
            name,
            quantity,
            status,
            type,
            user_id
        } = itemData
        let buff = `
        <div id="update-resources-modal-${thisId}" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
            <div class="relative p-4 w-full max-w-2xl max-h-full">
                <div class="relative bg-white rounded-lg shadow-sm">
                    <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">
                            Resources Form
                        </h3>
                    </div>
                    <form id="update-resources-form" class="p-4 md:p-5">
                        <div class="grid gap-4 mb-4 grid-cols-2">
                            <input type="hidden" name="id" value="${id}" />
                            <!-- <div class="col-span-2">
                                <label for="resourcestype" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Select Item</label>
                                <select id="resourcestype" name="type" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5">
                                    <option value="1" selected>Equipment</option>
                                    <option value="2">Medicine</option>
                                </select>
                            </div> -->
                            <div class="col-span-1">
                                <label for="resourcesname" class="block mb-2 text-sm font-medium text-gray-900">Name</label>
                                <input 
                                type="text" 
                                name="name" 
                                id="resourcesname" 
                                value="${name}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Type name" required="">
                            </div>
                            <div class="col-span-1">
                                <label for="resourcesquantity" class="block mb-2 text-sm font-medium text-gray-900">Quantity</label>
                                <input 
                                type="number" 
                                name="quantity" 
                                id="resourcesquantity"
                                value="${quantity}" 
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Type quantity" required="">
                            </div>
                            <div class="col-span-1">
                                <label for="resourcesexpired" class="block mb-2 text-sm font-medium text-gray-900">Date Expired</label>
                                <input 
                                type="date" 
                                name="dateExpired" 
                                id="resourcesexpired" 
                                value="${date_expired}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Date expired" required="">
                            </div>
                            <div class="col-span-1">
                                <label for="resourcesmanufacturer" class="block mb-2 text-sm font-medium text-gray-900">Manufacturer</label>
                                <input 
                                type="text" 
                                name="manufacturer" 
                                id="resourcesmanufacturer" 
                                value="${manufacturer}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5" 
                                placeholder="Type manufacturer" required="">
                            </div>
                            <div class="col-span-2">
                                <label for="resourcesDescription" class="block mb-2 text-sm font-medium text-gray-900">Description</label>
                                <textarea 
                                id="resourcesDescription"
                                name="description" 
                                rows="4" 
                                class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500" 
                                placeholder="Write Description">${description}</textarea>                    
                            </div>
                        </div>
                        <button type="submit" class="text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">
                            <svg class="me-1 -ms-1 w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
                            Submit
                        </button>
                    </form>
                </div>
            </div>
        </div>`

        $('.displayUpdateModal').empty()
        $('.displayUpdateModal').append(buff)

        var modalShow = initModal(`update-resources-modal-${thisId}`)
        modalShow.show()

        $('#update-resources-form').submit( async(e)=>{
            e.preventDefault()
            const $parent = $(e.currentTarget)
            const response = await setMethod('/resources','PUT',$parent.serialize())
            setToast(response.message,response.error)
            modalShow.hide()
            resourcesFunc()
            var updatemodalShow = initModal(`update-resources-modal-${thisId}`)
            updatemodalShow.show()
        })
    }
</script>

<!--Handle View Modal-->
<script>
    const viewShowModal = async (thisId,itemId)=>{}

    const viewAppointmentModal = async (currDate)=>{
        const date = new Date(currDate);

        const formattedDate = date.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });

        const result = await setMethod('/appointment','POST',`date=${currDate}`)
        if(!result.error){
            let tbodyRow = ''
            for(const i in result.data){
                const {form_type,id,name,date_created,followup_date,status} = result.data[i]
                tbodyRow += `
                <tr class="odd:bg-green-800 even:bg-green-800 hover:bg-green-800 hover:text-white">
                    <td class="px-6 py-4">${name}</td>
                    <td class="px-6 py-4 text-sm">${date_created}</td>
                    <td class="px-6 py-4">${form_type}</td>
                    <td class="px-6 py-4">${status==0?'Pending':status==1?'Done':'UnAttend'}</td>
                </tr>`
            }
            const buff = `
            <div id="appointment-modal" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
                <div class="relative p-4 w-full max-w-2xl max-h-full">
                    <div class="relative bg-white rounded-lg shadow-sm">
                        <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-900">
                            ${formattedDate} Appointment
                            </h3>
                        </div>
                        <div class="p-4">
                            <table class="w-full text-sm text-left text-gray-500">
                                <thead class="text-xs text-gray-700 bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">Name</th>
                                        <th scope="col" class="px-6 py-3">Date</th>
                                        <th scope="col" class="px-6 py-3">Service</th>
                                        <th scope="col" class="px-6 py-3">Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${tbodyRow}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>`
            $('.displayAppointModal').empty().append(buff)

            initModal(`appointment-modal`).show()
        }
    }
</script>

<!--Handle Delete Modal-->
<script>
    const deleteActionModal = async (thisId,router,id,func)=>{
        if(router){
            const result = await setMethod(router,'DELETE',`id=${id}`)
            if(!result.error){
                let deleteModal = initModal(`${thisId}`)
                deleteModal.hide()
                if(func && typeof func==='function') func()
            }
        }
    }

    const deleteShowModal = async (thisId,router,func)=>{
        buff= `
        <div id="delete-popup-modal-${thisId}" tabindex="-1" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
            <div class="relative p-4 w-full max-w-md max-h-full">
                <div class="relative bg-white rounded-lg shadow-sm dark:bg-gray-700">
                    <button type="button" class="absolute top-3 end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="popup-modal">
                        <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                        </svg>
                        <span class="sr-only">Close modal</span>
                    </button>
                    <div class="p-4 md:p-5 text-center">
                        <svg class="mx-auto mb-4 text-gray-400 w-12 h-12 dark:text-gray-200" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
                        </svg>
                        <h3 class="mb-5 text-lg font-normal text-gray-500 dark:text-gray-400">Are you sure you want to delete this?</h3>
                        <button data-modal-hide="popup-modal" id="delete-popup-modal-${thisId}" type="button" class="delete-modal-${thisId} text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center">
                            Yes, I'm sure
                        </button>
                        <button data-modal-hide="popup-modal" id="delete-popup-modal-${thisId}" type="button" class="cancel-modal-${thisId} py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-red-600 focus:z-10 focus:ring-4 focus:ring-gray-100">No, cancel</button>
                    </div>
                </div>
            </div>
        </div>`
        $('.displayUpdateModal').empty()
        $('.displayUpdateModal').append(buff)
        
        const showdeleteModal = initModal(`delete-popup-modal-${thisId}`)
        showdeleteModal.show()

        $(`.delete-modal-${thisId}`).on('click', () => deleteActionModal(`delete-popup-modal-${thisId}`, router, thisId, func));
        $(`.cancel-modal-${thisId}`).on('click', () => deleteActionModal(`delete-popup-modal-${thisId}`));
    }
</script>

<!-- Health Record-->
<script>
const recordsFunc = async ()=>{
        const result = await setMethod('/records','GET')
        if(!result.error){
            let itemArray = []
            for(let i in result.data){
                const item = result.data[i]
                
                const recordsButton = `
                    <svg type="button" id="${item.form_type_id}-Records-${item.id}" itemId="${item.id}" onclick="recordshandledropdownBtn(this)" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="cursor-pointer w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"></path>
                    </svg>`
                itemArray.push([
                    item.name,
                    item.date_created,
                    item.form_type_id,
                    recordsButton
                ])
            }
            const sanitizedData = itemArray.map(row => row.map(cell => sanitize(cell)))
            const contentData = {
                'headings': [
                    'Name',
                    'Date',
                    'Service',
                    ''
                ],
                'data': sanitizedData,
            };   
            const content = 'records'
            if (document.getElementById(`${content}-table`) && typeof simpleDatatables.DataTable !== 'undefined') {
                if(!!recordsDataTable) recordsDataTable.destroy();
                recordsDataTable = new simpleDatatables.DataTable(`#${content}-table`, {
                    searchable: true,
                    sensitivity: "base", 
                    searchQuerySeparator: " ",

                    perPageSelect: false,
                    sortable:true,
                    perPage: 500,
                    nextPrev: true,
                    data: contentData,

                    tableRender: (_data, table, type) => {
                        if (type === "print") {
                            return table;
                        }

                        // Ensure table is an object with a valid structure
                        if (!table || typeof table !== "object" || !Array.isArray(table.childNodes)) {
                            console.error("tableRender received an invalid table structure:", table);
                            return table;
                        }

                        // Locate the thead and tbody
                        const tHead = table.childNodes.find(node => node.nodeName === "THEAD");
                        const tBody = table.childNodes.find(node => node.nodeName === "TBODY");

                        if (tHead) {
                            const filterRow = {
                                nodeName: "TR",
                                attributes: {
                                    class: "search-filtering-row"
                                }
                            };
                            tHead.childNodes.push(filterRow);
                        }

                        if (tBody) {
                            tBody.childNodes.forEach(row => {
                                row.attributes = row.attributes || {};
                                row.attributes.class = (row.attributes.class || "") + " hover:bg-green-800 hover:text-white cursor-pointer";
                            });
                        }

                        return table;
                    },
                    rowRender: (rowValue, tr, _index) => {
                        if (!tr.attributes) {
                            tr.attributes = {}
                        }
                        tr.attributes["data-name"] = rowValue.cells[1].data
                        return tr
                    },
                    // columns: [
                    //     {
                    //         select: 0,
                    //         sortable: false,
                    //         render: (value, _td, _rowIndex, _cellIndex) => `<span class="checkbox">${value ? "☑" : "☐"}</span>`
                    //     }
                    // ]
                });

                recordsDataTable.on('datatable.init', function () {
                    const $searchContainer = $(`#${content} .datatable-top .datatable-search`);
                    const $search = $(`#${content} .datatable-top`);

                    if ($search.length) {
                        $search.css({
                            flexDirection: 'row',
                            alignItems: 'center',
                            justifyContent: 'flex-start',
                            gap: '0.5rem'
                        });
                    }

                    if ($searchContainer.length) {
                        const $customizeButton = $("<button>", {
                            text: "Add Record",
                            class: "bg-green-500 text-white px-4 py-1.5 rounded shadow hover:bg-green-800 hover:shadow-lg",
                            type: "button"
                        });

                        $customizeButton.on("click", function () {
                            const display = initModal(`${content}-modal`);
                            display.show()
                        });

                        $searchContainer.after($customizeButton);
                    }
                })
            }
        }
    }
    recordsFunc()
</script>

<script>
    document.addEventListener('DOMContentLoaded', async function() {
        const calendarEl = document.getElementById('calendar')
        const calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            fixedWeekCount: false,
            showNonCurrentDates: false,
            dayMaxEventRows: 2,
            selectable: true,
            events: function(fetchInfo, successCallback, failureCallback) {
                $.ajax({
                    url: `/appointment`,
                    method: 'GET',
                    success: function(response) {
                        if(!response.error){
                            const events = []
                            for(const i in response.data){
                                const {name,date_created,followup_date} = response.data[i]
                                events.push({
                                    title:name,
                                    start: followup_date,
                                    resourceEditable: false,
                                    color: '#2E7D5C',
                                    textColor: '#ffffff',
                                    borderColor: '#000000'
                                })
                            }
                            successCallback(events)
                        }else{
                            console.log("CALENDAR ERROR: ",response)
                        }
                    },
                    error: function(xhr, status, error) {
                        console.log(xhr, status, error)
                        failureCallback(xhr, status, error);
                    }
                })
            },
            dateClick: async function(info) {
                // console.log(info)
                // console.log(info.dateStr)
                viewAppointmentModal(info.dateStr)
            }
        })
        calendar.render()
    });
</script>
</html>